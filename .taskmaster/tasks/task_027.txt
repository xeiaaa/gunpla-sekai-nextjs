# Task ID: 27
# Title: Redesign Build Edit Page with Tabbed Interface and Media Library
# Status: pending
# Dependencies: 26
# Priority: high
# Description: Major UI/UX overhaul of /builds/[id]/edit page implementing centralized media library, tabbed navigation, and improved build info form
# Details:
This task involves a complete redesign of the build edit page with the following key features:

1. **Build Media Library**: Centralized media management per build with drag-and-drop uploads, captions, sorting, and deletion capabilities. Images become the single source of truth (no duplicate uploads at milestone level).

2. **Milestone Image Assignment**: Milestones no longer have individual upload sections. Instead, they reference images from the centralized media library with the ability to attach multiple images and order them within milestones.

3. **Build Info Form**: Move build editing form to the top of the page (not hidden in modal/card) with fields for title, description (markdown editor), status, started date, and completed date. Remove "Edit Build Info" button from sidebar.

4. **Tab Navigation**: Implement tabbed interface similar to kit pages with three tabs:
   - Build Info: Title, description (markdown), status, dates
   - Build Gallery: Full media library with all uploaded images, captions, sorting
   - Build Milestones: List of milestones with attached images from media library

5. **Optional Enhancements**: Featured image selection from media library and maintain right-hand "Build Stats" sidebar.

This requires significant refactoring of the existing BuildDetailEditView component, new media library components, tab navigation system, and updates to the milestone management system.

# Test Strategy:


# Subtasks:
## 1. Create Tab Navigation System and Layout Structure [pending]
### Dependencies: None
### Description: Implement the basic tabbed interface structure for the build edit page with three tabs: Build Info, Build Gallery, and Build Milestones
### Details:
- Create tab navigation component similar to kit pages
- Set up basic layout structure with tab content areas
- Implement tab state management and switching logic
- Ensure responsive design for mobile and desktop
- Add proper styling and active tab indicators

## 2. Build Centralized Media Library Component [pending]
### Dependencies: None
### Description: Create a comprehensive media library component with drag-and-drop uploads, image management, captions, and sorting capabilities
### Details:
- Implement drag-and-drop file upload functionality
- Create image grid layout with thumbnail previews
- Add caption editing for each image
- Implement image sorting (by upload date or manual drag-and-drop)
- Add delete and replace functionality for images
- Create image selection interface for milestone assignment
- Ensure proper image optimization and loading states

## 3. Refactor Build Info Form to Always-Visible Layout [pending]
### Dependencies: None
### Description: Move the build editing form from modal/card to always-visible form at the top of the Build Info tab
### Details:
- Remove "Edit Build Info" button from sidebar
- Create always-visible form in Build Info tab with fields:
  - Title (text input)
  - Description (markdown editor for rich build logs)
  - Status (dropdown: Planning/In Progress/Completed)
  - Started date (date picker)
  - Completed date (date picker, only enabled if status = Completed)
- Implement auto-save or explicit "Save Changes" button
- Add form validation and error handling
- Ensure proper form state management

## 4. Update Milestone System for Media Library Integration [pending]
### Dependencies: None
### Description: Refactor milestone components to reference images from the centralized media library instead of individual uploads
### Details:
- Remove individual upload sections from milestone cards
- Create image selection interface for milestones that references media library
- Implement ability to attach multiple images to milestones
- Add image ordering within milestones
- Allow images to belong to multiple milestones
- Update milestone card display to show only selected images
- Refactor milestone image management logic and state
- Update database queries and actions for new image relationship model

## 5. Implement Featured Image Selection from Media Library [pending]
### Dependencies: None
### Description: Update featured image selection to work with the centralized media library instead of milestone images
### Details:
- Update FeaturedImageSelector component to work with media library
- Create interface to select featured image from all uploaded images
- Update featured image display and management logic
- Ensure featured image updates are reflected across all views
- Add visual indicators for which image is currently featured
- Update database actions for featured image management

## 6. Update Sidebar and Finalize Integration [pending]
### Dependencies: None
### Description: Update the build actions sidebar, maintain stats card, and ensure all components work together seamlessly
### Details:
- Remove "Edit Build Info" button from Build Actions card
- Update Build Stats card to reflect new media library image counts
- Ensure sidebar maintains proper sticky positioning
- Test and fix any integration issues between components
- Add proper loading states and error handling
- Ensure responsive design works across all screen sizes
- Add comprehensive testing for the new tabbed interface
- Update any remaining references to old milestone upload system


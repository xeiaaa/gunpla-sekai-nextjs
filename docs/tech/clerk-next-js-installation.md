# Clerk Next.js Installation Guide

## Overview

This guide walks you through installing and setting up Clerk authentication in your Next.js application. Once you create your first user account, the installation is complete.

## Installation Steps

### 1. Install @clerk/nextjs

```bash
npm install @clerk/nextjs
```

### 2. Set your Clerk API keys

Add these keys to your `.env` file (create it if it doesn't exist). Retrieve these keys from the [API keys page](https://dashboard.clerk.com/last-active?path=api-keys) in your Clerk dashboard.

```env
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_dXNhYmxlLXN3YW4tODcuY2xlcmsuYWNjb3VudHMuZGV2JA
CLERK_SECRET_KEY=••••••••••••••••••••••••••••••••••••••••••••••••••
```

### 3. Update middleware.ts

Create or update your middleware file at the root of your project (or in the `src/` directory if using that structure).

```typescript
import { clerkMiddleware } from "@clerk/nextjs/server";

export default clerkMiddleware();

export const config = {
  matcher: [
    // Skip Next.js internals and all static files, unless found in search params
    "/((?!_next|[^?]*\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)",
    // Always run for API routes
    "/(api|trpc)(.*)",
  ],
};
```

The `clerkMiddleware` helper enables authentication and is where you'll configure your protected routes.

### 4. Add ClerkProvider to your app

The `ClerkProvider` component provides Clerk's authentication context to your app. Wrap your entire app at the entry point to make authentication globally accessible.

Update your `layout.tsx` file:

```typescript
import { type Metadata } from "next";
import {
  ClerkProvider,
  SignInButton,
  SignUpButton,
  SignedIn,
  SignedOut,
  UserButton,
} from "@clerk/nextjs";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "Clerk Next.js Quickstart",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <ClerkProvider>
      <html lang="en">
        <body
          className={`${geistSans.variable} ${geistMono.variable} antialiased`}
        >
          <header className="flex justify-end items-center p-4 gap-4 h-16">
            <SignedOut>
              <SignInButton />
              <SignUpButton>
                <button className="bg-[#6c47ff] text-ceramic-white rounded-full font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 cursor-pointer">
                  Sign Up
                </button>
              </SignUpButton>
            </SignedOut>
            <SignedIn>
              <UserButton />
            </SignedIn>
          </header>
          {children}
        </body>
      </html>
    </ClerkProvider>
  );
}
```

### 5. Create your first user

Run your development server:

```bash
npm run dev
```

Visit your app's homepage at `http://localhost:3000` and sign up to create your first user. Once you detect that first account, installation is complete.

## Next Steps

- **Custom Authentication Pages**: While the Account Portal is the fastest way to add authentication, Clerk provides pre-built, customizable components for your own pages
- **Protected Routes**: Configure protected routes in your middleware
- **User Management**: Explore Clerk's user management features in your dashboard

## Additional Resources

- [Clerk Documentation](https://clerk.com/docs)
- [Next.js Integration Guide](https://clerk.com/docs/quickstarts/nextjs)
- [API Keys Management](https://dashboard.clerk.com/last-active?path=api-keys)
